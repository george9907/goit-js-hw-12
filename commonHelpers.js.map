{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import { form, page, input } from '../main';\nimport axios from \"axios\";\n\nexport let pageLimit = 15;\n\nexport async function pixabayPhoto() {\n    let formValue;\n    if (page === 1) {\n        const inputSearch = form.elements.search;\n        formValue = inputSearch.value.trim().split(' ').join('+');\n    } else {\n        formValue = input.trim().split(' ').join('+');\n    }\n    const searchParams = new URLSearchParams({\n        key: '43219571-0a26e2304ee50d7f75a2b614a',\n        q: formValue,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: pageLimit,\n    });\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const photosGallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\nexport function renderPhotos(arr) {\n        const markup = arr.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n            return `<li class=\"photos-list-item\">\n            <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n            <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n            </a>\n            <ul class=\"photo-information-container\">\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n            <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n            </ul>\n            </li>`;\n        })\n            .join(\"\");\n        photosGallery.insertAdjacentHTML(\"beforeend\", markup);\n        lightbox.refresh();\n}\n","import { pixabayPhoto, pageLimit } from './js/pixabay-api';\nimport { renderPhotos, photosGallery } from './js/render-functions';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nexport const form = document.querySelector('.search-form');\nexport let page = 1;\nexport let input = '';\nlet maxPage = 1;\n\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nhideElement(loadMoreBtn);\n\nconst preloader = document.querySelector('.loader');\nhideElement(preloader);\n\n\nwindow.onload = handleLoad;\n\nform.addEventListener('submit', sendForm);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nfunction sendForm(evt) {\n    evt.preventDefault();\n    photosGallery.innerHTML = \"\";\n    const newInput = evt.target.elements.search.value.trim();\n    if (newInput !== '') {\n        page = 1;\n        input = newInput;\n        submitForm();\n    } else {\n        return iziToast.show({\n        theme: 'dark',\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n        message: 'Please complete the field!',\n        messageColor: '#FAFAFB',\n        position: 'topRight',\n    });\n    }\n}\nasync function submitForm() {\n    try {\n        hideElement(loadMoreBtn);\n        showElement(preloader);\n        if (page <= maxPage) {\n            const photoFromPixabay = await pixabayPhoto();\n            if (photoFromPixabay.totalHits != 0) {\n                maxPage = Math.ceil(photoFromPixabay.totalHits / pageLimit);\n                renderPhotos(photoFromPixabay.hits);\n                const itemOfList = photosGallery.querySelector('.photos-list-item');\n                const domRect = itemOfList.getBoundingClientRect();\n                window.scrollBy({\n                    top: domRect.height * 2,\n                    behavior: \"smooth\",\n                });\n                if (page < maxPage) {\n                    showElement(loadMoreBtn);\n                }\n                else {\n                    iziToast.info({\n                        theme: 'dark',\n                        backgroundColor: '#EF4040',\n                        progressBarColor: '#B51B1B',\n                        message: \"We're sorry, there are no more images to load\",\n                        messageColor: '#FAFAFB',\n                        position: 'topRight',\n                    });\n                } } else {\n                iziToast.error({\n                 theme: 'dark',\n                 backgroundColor: '#EF4040',\n                 progressBarColor: '#B51B1B',\n                 message: \"Sorry, there are no images matching your search query. Please try again!\",\n                 messageColor: '#FAFAFB',\n                 position: 'topRight',\n        });\n        }}} catch (error) {\n        console.log(error);\n        iziToast.error({\n            message: `${error.message}`,\n            theme: 'dark',\n            progressBarColor: '#FFFFFF',\n            color: '#EF4040',\n            position: 'topRight',\n        });\n    } finally {\n        hideElement(preloader);\n        handleLoad();\n        form.reset();\n    }\n}\n\nfunction onLoadMoreClick() {\n    ++page;\n    submitForm();\n};\n\nfunction showElement(element) {\n    element.classList.toggle('hidden');\n    element.style.display = 'flex';\n};\n\nfunction hideElement(element) {\n    element.classList.toggle('hidden');\n    element.style.display = 'none';\n};\n\nfunction handleLoad() {\n    document.body.classList.add('loaded');\n    document.body.classList.remove('loaded_hiding');\n};\n\n\n\n\n\n\n\n"],"names":["pageLimit","pixabayPhoto","formValue","page","form","input","searchParams","axios","photosGallery","lightbox","SimpleLightbox","renderPhotos","arr","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","maxPage","loadMoreBtn","hideElement","preloader","handleLoad","sendForm","onLoadMoreClick","evt","newInput","submitForm","iziToast","showElement","photoFromPixabay","domRect","error","element"],"mappings":"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"}